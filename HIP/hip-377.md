---
hip: 377
title: Buyable Tokens
author: author: Justin Atwell <justin.atwell@hedera.com>, The Matt Smithies <matt.s@dovu.io>, Sergey Metelin <sergey.metelin@hedera.com, Wes Geisenberger <wes@hbar.fund>, Brian Johnson <johnsonb@objectcomputing.com>, Ciju John <johnc@objectcomputing.com>
working-group: a list of the technical and business stakeholders' name(s) and/or username(s), or name(s) and email(s).
type: Service
category: Service
needs-council-approval: Yes
status: Draft
created: 2022-03-03
discussions-to: https://github.com/hashgraph/hedera-improvement-proposal/discussions/386
---

## Abstract

Proposes platform enhancements to enable token transactions without an additional signature.

## Motivation

Token transfer transactions currently require the token owners signature. This requires token owners to be actively involved in the token transaction. As such innovations such as asynchronous atomic swaps are not currently feasible.

## Rationale

Availability of criteria driven pre-authorized transactions leads to some innovative uses cases e.g. users can do fire-and-forget token sale listings without the need for third-party custody agents. The features proposed herein will facilitate users to pre-define sale criterias. The Hedera platform will then asynchronously facilitate atomic swap operations matching said user defined criterias.

As a one time event upon minting, we introduce the boolean field “is_buyable_token”. When this field is enabled, and a sale criteria defined, the token can transferred as part of an atomic swap transaction that meets said criteria.

In the DEFI scenario, it might be appropriate to programmatically purchase every NFT created by a certain artist, or a series of carbon offsets with particular attributes. This HIP would allow users to purchase NFTs without the facilitation of a third party.

Additionally we propose a delegated token authority. This will enable users to delegate `purchase` authority without losing custody. This could be employed for delegating `purchase` of carbon offsets with particular attributes. This will enable users to define fire-and-forget purchase directives enabling token transactions without an additional signature.

## User stories

As a software program I want to be able to purchase “buyable tokens” without a signature. I just want to buy it for the listed price.

As a person who wants a particular amount of HBAR (or token) for the buyable tokens listed but does not care about anything else, I want to check a button to make that happen.

As a person who wants to spend a particular amount of HBAR (or token) towards the purchase of a set of tokens with particular attributes, I want to authorize a trusted party to make that happen.
  
## Specification

```
message TokenCreateTransactionBody {

    string name = 1;
    string symbol = 2;
    uint32 decimals = 3;
    uint64 initialSupply = 4;
    AccountID treasury = 5;
    Key adminKey = 6;
    Key kycKey = 7;
    Key freezeKey = 8;
    Key wipeKey = 9;
    Key supplyKey = 10;
    bool freezeDefault = 11;
    Timestamp expiry = 13;
    AccountID autoRenewAccount = 14;
    Duration autoRenewPeriod = 15;
    string memo = 16;
    TokenType tokenType = 17;
    TokenSupplyType supplyType = 18;
    int64 maxSupply = 19;
    Key fee_schedule_key = 20;
    repeated CustomFee custom_fees = 21;

    //new field
    Bool is_buyable_token = 22;
}

//new messages
Message buyableTokenProperties {
   TokenId buyable_token_id = "COF";    // Token Id that is being sold
   Uint64 buyable_token_amount = 1000;  // Number tokens intended to sell, in smallest unit of this token
   TokenId tradeable_token_id = ;       // Buyers token; if left empty signifies HBAR token id
   Uint64 tradeable_token_amount = 10;  // Asked for total tradeable token amount, in smallest unit of this token
   Timestamp buyable_at = <now>;        // sale start
   Timestamp expire_at = <end>;         // sale end
}

Message delegatedTokenProperties {
   TokenId token_id = ;                 // Token Id that is being delegated; if left empty signifies HBAR token id
   Uint64 delegated_token_amount = 100; // Number of delegated tokens, in smallest unit of this token
   Account delegatedAccount = "arm";    // Delegated account
   Timestamp buyable_at = <now>;        // sale start
   Timestamp expire_at = <end>;         // sale end
}
```

## Backwards Compatibility

Tokens without a `is_buyable_token` field will be defaulted to `False`.

## Security Implications

A user can define a single active `buyableTokenProperties` for any Token the user posses. New `buyableTokenProperties` for the same Token will override the previous buyable criteria with the latest criterias. Setting this limit ensures users do not utilize this feature as an abuse vector. It caps the number of active `buyableTokenProperties` for any user. One advantage of this limitation is that a user can `cancel` an existing `buyableTokenProperties` by issuing a new `buyableTokenProperties` for that token with an expired `expire_at` value.

A `delegatedTokenProperties` while retaining token custody, delegates authority. This can be an abuse vector and therefore the user needs to ensure the `delegatedAccount` is trusted.

## How to Teach This

A user can issue fungible or non-fungible tokens set to be sellable (`is_buyable_token` = `True`). For any unique NFT or buyable fungible tokens the user holds, they can issue a `buyableTokenProperties` with sale criteria. Buyers interested in said tokens can at any time execute atomic swaps that meets the individual sale criteria. The seller need not be present for the sale as long as the defined sale criteria is meet. Sellers can close one or more sale by issuing new `buyableTokenProperties` for those tokens with expired `expire_at` values.

## Reference Implementation

## Rejected Ideas

## Open Issues

## References

## Copyright/license

This document is licensed under the Apache License, Version 2.0 -- see [LICENSE](../LICENSE) or (https://www.apache.org/licenses/LICENSE-2.0)